---
title: Otomatik proforma fatura oluşturmayı yapılandırma
description: Bu konuda, proforma faturaların otomatik oluşturulmasının yapılandırılması hakkında bilgiler sağlanmaktadır.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: dynamics-365-customerservice
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: e146dd510b3795d52d164fc6acf8e5400ba11310
ms.sourcegitcommit: 11a61db54119503e82faec5f99c4273e8d1247e5
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/16/2020
ms.locfileid: "4086233"
---
# <a name="configure-automated-proforma-invoice-creation"></a><span data-ttu-id="d2263-103">Otomatik proforma fatura oluşturmayı yapılandırma</span><span class="sxs-lookup"><span data-stu-id="d2263-103">Configure automated proforma invoice creation</span></span>

<span data-ttu-id="d2263-104">_**Şunlar için geçerlidir:** Lite dağıtımı: anlaşmadan proforma faturaya_</span><span class="sxs-lookup"><span data-stu-id="d2263-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="d2263-105">Dynamics 365 Project Operations otomatik fatura oluşturmayı yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d2263-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="d2263-106">Sistem, her proje sözleşmesi ve sözleşme satırı için fatura planına dayalı olarak bir taslak proforma fatura oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d2263-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="d2263-107">Fatura zamanlamaları, sözleşme satırı düzeyinde yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="d2263-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="d2263-108">Bir sözleşmedeki her satırın ayrı bir fatura çizelgesi olabilir veya sözleşmenin her satırına aynı fatura çizelgesi eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="d2263-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="d2263-109">Bir fatura oluşturduğunuzda, sistem her zaman proje sözleşmesi başına en az bir fatura oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d2263-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="d2263-110">Bazı durumda, birden çok fatura oluşturulmuş olabilir.</span><span class="sxs-lookup"><span data-stu-id="d2263-110">In some cases, there may be multiple invoices created.</span></span>

<span data-ttu-id="d2263-111">Örneğin, sözleşmenin birden çok müşterisi varsa, bu proje sözleşmesinde faturalamak için faturalandırılabilir hareketlere sahip olan müşteri sayısı olarak aynı fatura oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d2263-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="d2263-112">Hareketlerin faturaya nasıl dahil edildiğini anlama</span><span class="sxs-lookup"><span data-stu-id="d2263-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="d2263-113">Bazı durumlarda, proje tabanlı her sözleşme satırı ayrı bir fatura çizelgesi belirtir.</span><span class="sxs-lookup"><span data-stu-id="d2263-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="d2263-114">Örneğin, Adatum sözleşmesi için olan gerçekleştirme hizmetlerinde aşağıdaki sözleşme satırları vardır:</span><span class="sxs-lookup"><span data-stu-id="d2263-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="d2263-115">İki el ile oluşturulmuş kilometre taşlarıyla sabit bir fiyat olan prototip çalışma.</span><span class="sxs-lookup"><span data-stu-id="d2263-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="d2263-116">Zaman dahil ve Pazartesi günleri haftada iki haftada bir faturalanacaktır.</span><span class="sxs-lookup"><span data-stu-id="d2263-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="d2263-117">Aylık olarak faturalandırılacağını gerektiren ve her ayın ilk Pazartesi günü cinsinden tahakkuk eden giderler.</span><span class="sxs-lookup"><span data-stu-id="d2263-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="d2263-118">Bu iki satır öğesinin her birinde tanımlanan fatura zamanlamaları aşağıdaki tabloda olduğu gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="d2263-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="d2263-119">Sözleşme Satırı</span><span class="sxs-lookup"><span data-stu-id="d2263-119">Contract line</span></span> | <span data-ttu-id="d2263-120">Fatura çalıştırma tarihi</span><span class="sxs-lookup"><span data-stu-id="d2263-120">Invoice run date</span></span> | <span data-ttu-id="d2263-121">İşlem durdurma tarihi</span><span class="sxs-lookup"><span data-stu-id="d2263-121">Transaction cut-off date</span></span> | <span data-ttu-id="d2263-122">Kilometre taşı tarihi</span><span class="sxs-lookup"><span data-stu-id="d2263-122">Milestone date</span></span> | <span data-ttu-id="d2263-123">Kilometre Taşı Tutarı</span><span class="sxs-lookup"><span data-stu-id="d2263-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="d2263-124">Prototip çalışma</span><span class="sxs-lookup"><span data-stu-id="d2263-124">Prototype work</span></span> | <span data-ttu-id="d2263-125">5 Ekim Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-125">October 5, Monday</span></span> | - | <span data-ttu-id="d2263-126">5 Ekim Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-126">October 5, Monday</span></span> | <span data-ttu-id="d2263-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="d2263-127">5000 USD</span></span> |
| - | <span data-ttu-id="d2263-128">Salı, 3 Kasım</span><span class="sxs-lookup"><span data-stu-id="d2263-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="d2263-129">Salı, 3 Kasım</span><span class="sxs-lookup"><span data-stu-id="d2263-129">November 3, Tuesday</span></span> | <span data-ttu-id="d2263-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="d2263-130">12,000 USD</span></span> |
| <span data-ttu-id="d2263-131">Uygulama çalışması</span><span class="sxs-lookup"><span data-stu-id="d2263-131">Implementation work</span></span> | <span data-ttu-id="d2263-132">5 Ekim Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-132">October 5, Monday</span></span> | <span data-ttu-id="d2263-133">4 Ekim Pazar</span><span class="sxs-lookup"><span data-stu-id="d2263-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="d2263-134">19 Ekim Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-134">October 19, Monday</span></span> | <span data-ttu-id="d2263-135">18 Ekim Pazar</span><span class="sxs-lookup"><span data-stu-id="d2263-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="d2263-136">2 Kasım, Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-136">November 2, Monday</span></span> | <span data-ttu-id="d2263-137">1 Kasım, Pazar</span><span class="sxs-lookup"><span data-stu-id="d2263-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="d2263-138">16 Kasım, Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-138">November 16, Monday</span></span> | <span data-ttu-id="d2263-139">15 Kasım, Pazar</span><span class="sxs-lookup"><span data-stu-id="d2263-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="d2263-140">Tahakkuk eden masraflar</span><span class="sxs-lookup"><span data-stu-id="d2263-140">Expenses incurred</span></span> | <span data-ttu-id="d2263-141">5 Ekim Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-141">October 5, Monday</span></span> | <span data-ttu-id="d2263-142">4 Ekim Pazar</span><span class="sxs-lookup"><span data-stu-id="d2263-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="d2263-143">2 Kasım, Pazartesi</span><span class="sxs-lookup"><span data-stu-id="d2263-143">November 2, Monday</span></span> | <span data-ttu-id="d2263-144">1 Kasım, Pazar</span><span class="sxs-lookup"><span data-stu-id="d2263-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="d2263-145">Bu örnekte, otomatik faturalama şu şekilde çalışır:</span><span class="sxs-lookup"><span data-stu-id="d2263-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="d2263-146">**4 Ekim tarihi veya öncesinde herhangi bir tarih** : Bu sözleşme satırlarının **fatura zamanlama** tablosu 4 Ekim Pazar gününü fatura çalışma tarihi olarak aramadığı için bu sözleşme için fatura oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="d2263-146">**October 4 or any date before** : No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="d2263-147">**5 Ekim Pazartesi** : Bir fatura oluştuulur:</span><span class="sxs-lookup"><span data-stu-id="d2263-147">**October 5 Monday** : One invoice is generated for:</span></span>

    - <span data-ttu-id="d2263-148">**Faturaya hazır olarak** işaretlenmişse kilometre taşını içeren prototip işi.</span><span class="sxs-lookup"><span data-stu-id="d2263-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="d2263-149">**Fatura için hazır** olarak işaretlenen 4 Ekim ayının hareket kesme tarihinden önce oluşturulan tüm hareketleri içeren uygulaması.</span><span class="sxs-lookup"><span data-stu-id="d2263-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="d2263-150">**Fatura için hazır** olarak işaretlenen 4 Ekim ayının hareket kesme tarihinden önce oluşturulan tüm hareketleri içeren tahakkuk eden gider.</span><span class="sxs-lookup"><span data-stu-id="d2263-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="d2263-151">**6 Ekim tarihi veya 19 Ekim öncesinde herhangi bir tarih** : Bu sözleşme satırlarının **fatura zamanlama** tablosu 6 Ekim veya 19 Ekimden önceki bir tarihi fatura çalışma tarihi olarak aramadığı için bu sözleşme için fatura oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="d2263-151">**On October 6 or any date before October 19** : No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="d2263-152">**19 Ekim, Pazartesi** : **Fatura için hazır** olarak işaretlenen 18 Ekim, Pazar hareket kesme tarihinden önce oluşturulan tüm hareketleri içeren uygulaması.</span><span class="sxs-lookup"><span data-stu-id="d2263-152">**October 19, Monday** : One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="d2263-153">**2 Kasım Pazartesi** : Bir fatura oluştuulur:</span><span class="sxs-lookup"><span data-stu-id="d2263-153">**November 2 Monday** : One invoice is generated for:</span></span>

    - <span data-ttu-id="d2263-154">**Fatura için hazır** olarak işaretlenen 1 Kasım ayının hareket kesme tarihinden önce oluşturulan tüm hareketleri içeren uygulaması.</span><span class="sxs-lookup"><span data-stu-id="d2263-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="d2263-155">**Fatura için hazır** olarak işaretlenen 1 Kasım ayının hareket kesme tarihinden önce oluşturulan tüm hareketleri içeren tahakkuk eden gider.</span><span class="sxs-lookup"><span data-stu-id="d2263-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="d2263-156">**3 Kasım Salı** : **Faturaya hazır** olarak işaretlenmişse 12000 USD kilometre taşını içeren prototip çalışması için bir fatura oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d2263-156">**November 3, Tuesday** : One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="d2263-157">Otomatik faturalamayı yapılandır</span><span class="sxs-lookup"><span data-stu-id="d2263-157">Configure automatic invoicing</span></span>

<span data-ttu-id="d2263-158">Otomatik fatura çalıştırmayı yapılandırmak için bu adımları tamamlayın.</span><span class="sxs-lookup"><span data-stu-id="d2263-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="d2263-159">**Project Operations** 'da, **Ayarlar** > **Yinelenen fatura ayarı** 'na gidin.</span><span class="sxs-lookup"><span data-stu-id="d2263-159">In **Project Operations** , go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="d2263-160">Bir toplu iş oluşturun ve **Project Operations Fatura Oluştur** olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="d2263-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="d2263-161">Toplu işin adı "faturaları oluştur" kelimelerini içermelidir.</span><span class="sxs-lookup"><span data-stu-id="d2263-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="d2263-162">**İş Türü** alanında **Hiçbiri** 'ni seçin.</span><span class="sxs-lookup"><span data-stu-id="d2263-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="d2263-163">Varsayılan olarak, **Günlük Sıklık** ve **Etkin** alanları **Evet** olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="d2263-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="d2263-164">**İş Akışı Çalıştır** 'ı seçin.</span><span class="sxs-lookup"><span data-stu-id="d2263-164">Select **Run Workflow**.</span></span> <span data-ttu-id="d2263-165">**Kayıt Ara** iletişim kutusunda üç iş akışı görürsünüz:</span><span class="sxs-lookup"><span data-stu-id="d2263-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="d2263-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="d2263-166">ProcessRunCaller</span></span>
- <span data-ttu-id="d2263-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="d2263-167">ProcessRunner</span></span>
- <span data-ttu-id="d2263-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="d2263-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="d2263-169">**ProcessRunCaller** 'ı ve ardından **Ekle** 'yi seçin.</span><span class="sxs-lookup"><span data-stu-id="d2263-169">Select **ProcessRunCaller** , and then select **Add**.</span></span>
6. <span data-ttu-id="d2263-170">Sonraki iletişim kutusunda **Tamam** 'ı seçin.</span><span class="sxs-lookup"><span data-stu-id="d2263-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="d2263-171">**Uyku** iş akışının ardından **Süreç** iş akışı gelir.</span><span class="sxs-lookup"><span data-stu-id="d2263-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="d2263-172">Ayrıca, adım 5'te **ProcessRunner** 'ı seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d2263-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="d2263-173">Ardından **Tamam** 'ı seçtiğinizde, bir **Süreç** iş akışının ardından bir **Uyku** iş akışı gelir.</span><span class="sxs-lookup"><span data-stu-id="d2263-173">Then, when you select **OK** , a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="d2263-174">**ProcessRunCaller** ve **ProcessRunner** iş akışları faturaları oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d2263-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="d2263-175">**ProcessRunCaller** **ProcessRunner** 'ı çağırır.</span><span class="sxs-lookup"><span data-stu-id="d2263-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="d2263-176">**ProcessRunner** , faturaları gerçekte oluşturan iş akışıdır.</span><span class="sxs-lookup"><span data-stu-id="d2263-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="d2263-177">İş akışı, fatura oluşturulması için gereken tüm sözleşme satırlarından geçer ve bu satırlar için faturalar oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d2263-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="d2263-178">Faturaların oluşturulması gereken sözleşme satırlarını belirlemek için, iş sözleşme satırları için fatura çalıştırma tarihlerine bakar.</span><span class="sxs-lookup"><span data-stu-id="d2263-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="d2263-179">Bir sözleşmeye ait olan sözleşme satırları aynı fatura çalıştırma tarihine sahipse, işlemler iki fatura satırı bulunan tek bir faturada birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="d2263-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="d2263-180">Fatura oluşturulacak bir işlem yoksa, iş fatura oluşturmayı atlar.</span><span class="sxs-lookup"><span data-stu-id="d2263-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="d2263-181">**ProcessRunner** çalışması bittikten sonra, **ProcessRunCaller** öğesini çağırır, bitiş saati sağlar ve kapatılır.</span><span class="sxs-lookup"><span data-stu-id="d2263-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller** , provides the end time, and is closed.</span></span> <span data-ttu-id="d2263-182">**ProcessRunCaller** daha sonra belirtilen bitiş saatinden itibaren 24 saat çalışan bir zamanlayıcı başlatır.</span><span class="sxs-lookup"><span data-stu-id="d2263-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="d2263-183">Zamanlayıcının sonunda **ProcessRunCaller** kapatılır.</span><span class="sxs-lookup"><span data-stu-id="d2263-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="d2263-184">Fatura oluşturmaya yönelik toplu iş yinelenen bir iştir.</span><span class="sxs-lookup"><span data-stu-id="d2263-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="d2263-185">Bu toplu iş birçok defa çalıştırılırsa, işin birden çok kopyası oluşturulur ve hatalara yol açar.</span><span class="sxs-lookup"><span data-stu-id="d2263-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="d2263-186">Bu nedenle, toplu işi yalnızca bir kez başlatmanız gerekir ve yalnızca çalışmayı durdurduğunda yeniden başlatılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d2263-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="d2263-187">Project Operations'ta Toplu faturalama yalnızca fatura zamanlamalarında yapılandırılan proje sözleşme satırlarında çalışır.</span><span class="sxs-lookup"><span data-stu-id="d2263-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="d2263-188">Sabit fiyatlı fatura yöntemine sahip bir sözleşme satırının kilometre taşları yapılandırılmış olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d2263-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="d2263-189">Zaman ve malzeme faturalama yöntemi içeren bir proje sözleşmesi satırı, ayarlanmış bir tarih tabanlı fatura çizelgesine gereksinim duyar.</span><span class="sxs-lookup"><span data-stu-id="d2263-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>
